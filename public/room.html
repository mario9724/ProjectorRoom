<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sala - ProjectorRoom</title>
    <link rel="stylesheet" href="room.css">
</head>
<body>
    <div class="room-container">
        <!-- Informaci√≥n de la sala -->
        <div class="room-header">
            <div class="room-info">
                <h1 id="room-name-display">Cargando...</h1>
                <p>ID: <span id="room-id-display"></span></p>
                <p>Usuario: <span id="current-username"></span></p>
            </div>
            <button id="copy-link-btn" class="btn-secondary">üìã Copiar Link</button>
        </div>

        <!-- Panel Principal -->
        <div class="main-content">
            <!-- Informaci√≥n de Pel√≠cula -->
            <div class="movie-info">
                <img id="movie-poster" src="" alt="Poster" class="movie-poster">
                <div class="movie-details">
                    <h2 id="movie-title">Cargando...</h2>
                    <p><span id="movie-year"></span> ‚Ä¢ <span id="movie-rating"></span></p>
                    <p id="movie-overview" class="movie-description">Cargando descripci√≥n...</p>
                </div>
            </div>

            <!-- Panel de Pesta√±as -->
            <div class="tabs-container">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="chat">üí¨ Chat</button>
                    <button class="tab-btn" data-tab="users">üë• Usuarios</button>
                    <button class="tab-btn" data-tab="ratings">‚≠ê Calificaciones</button>
                    <button class="tab-btn" data-tab="reactions">üí≠ Reacciones</button>
                </div>

                <!-- Chat -->
                <div class="tab-content active" id="chat-tab">
                    <div id="chat-messages" class="chat-messages"></div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" placeholder="Escribe un mensaje..." maxlength="500">
                        <button id="send-message" class="btn-primary">Enviar</button>
                    </div>
                </div>

                <!-- Usuarios -->
                <div class="tab-content" id="users-tab">
                    <h3>Usuarios en la sala</h3>
                    <div id="users-list"></div>
                </div>

                <!-- Calificaciones -->
                <div class="tab-content" id="ratings-tab">
                    <h3>Califica esta pel√≠cula/serie</h3>
                    <div class="rating-input">
                        <select id="rating-select">
                            <option value="">Selecciona calificaci√≥n</option>
                            <option value="1">1 - Muy Mala</option>
                            <option value="2">2 - Mala</option>
                            <option value="3">3 - Regular</option>
                            <option value="4">4 - Aceptable</option>
                            <option value="5">5 - Buena</option>
                            <option value="6">6 - Muy Buena</option>
                            <option value="7">7 - Excelente</option>
                            <option value="8">8 - Incre√≠ble</option>
                            <option value="9">9 - Obra Maestra</option>
                            <option value="10">10 - Perfecci√≥n</option>
                        </select>
                        <button id="submit-rating" class="btn-primary">Enviar</button>
                    </div>
                    <div id="ratings-list" class="ratings-list"></div>
                </div>

                <!-- Reacciones -->
                <div class="tab-content" id="reactions-tab">
                    <h3>A√±ade una reacci√≥n</h3>
                    <div class="reaction-input">
                        <input type="text" id="reaction-time" placeholder="Tiempo (ej: 1:23)" maxlength="10">
                        <input type="text" id="reaction-message" placeholder="Tu reacci√≥n" maxlength="200">
                        <button id="submit-reaction" class="btn-primary">A√±adir</button>
                    </div>
                    <div id="reactions-list" class="reactions-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- IMPORTANTE: Socket.io DEBE cargarse ANTES de room.js -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="room.js"></script>

    <script>
        // Tabs functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const tabName = btn.getAttribute('data-tab');

                // Remover active de todos
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                // A√±adir active al seleccionado
                btn.classList.add('active');
                document.getElementById(tabName + '-tab').classList.add('active');
            });
        });
    </script>
</body>
</html>
