<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProjectorRoom</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="app-container">
    
    <!-- PASO 1: Nombre de usuario -->
    <div id="step1" class="step active">
      <div class="step-card">
        <h1>ğŸ‘‹ Ey roomie, Â¿cÃ³mo te llamas?</h1>
        <input type="text" id="username" placeholder="Tu nombre..." maxlength="20" autofocus>
        <button class="btn-primary" onclick="goToStep(2)">Continuar â†’</button>
      </div>
    </div>
    
    <!-- PASO 2: Nombre de la sala -->
    <div id="step2" class="step">
      <div class="step-card">
        <h1>ğŸ  Â¿CÃ³mo quieres llamar a tu sala?</h1>
        <input type="text" id="roomName" placeholder="Nombre de la sala..." maxlength="30">
        <button class="btn-primary" onclick="goToStep(3)">Continuar â†’</button>
        <button class="btn-secondary" onclick="goToStep(1)">â† Volver</button>
      </div>
    </div>
    
    <!-- PASO 3: Tipo de proyector -->
    <div id="step3" class="step">
      <div class="step-card">
        <h1>ğŸ¬ Â¿QuÃ© proyector quieres usar?</h1>
        
        <div class="option-card" onclick="selectProjectorType('public')">
          <input type="radio" name="projectorType" value="public" checked>
          <div class="option-content">
            <div class="option-title">ğŸŒ Proyector pÃºblico</div>
            <div class="option-desc">Se usarÃ¡ el predeterminado ya configurado</div>
          </div>
        </div>
        
        <div class="option-card" onclick="selectProjectorType('custom')">
          <input type="radio" name="projectorType" value="custom">
          <div class="option-content">
            <div class="option-title">âš™ï¸ Proyector personalizado</div>
            <div class="option-desc">Introduce tu manifest.json custom</div>
          </div>
        </div>
        
        <div id="customManifestBox" style="display:none;">
          <input type="url" id="customManifest" placeholder="https://tu-manifest.json">
        </div>
        
        <button class="btn-primary" onclick="goToStep(4)">Continuar â†’</button>
        <button class="btn-secondary" onclick="goToStep(2)">â† Volver</button>
      </div>
    </div>
    
    <!-- PASO 4: Compartir proyector -->
    <div id="step4" class="step">
      <div class="step-card">
        <h1>ğŸ”— Â¿Quieres compartir tu proyector?</h1>
        <p class="step-subtitle">Â¿CompartirÃ¡s tu fuente o cada roomie usarÃ¡ la suya?</p>
        
        <div class="option-card" onclick="selectShareMode('host')">
          <input type="radio" name="shareMode" value="host" checked>
          <div class="option-content">
            <div class="option-title">ğŸ“¡ Compartir mi proyector</div>
            <div class="option-desc">Tu fuente se usarÃ¡ para todos (compartes tu Debrid)</div>
          </div>
        </div>
        
        <div class="option-card" onclick="selectShareMode('individual')">
          <input type="radio" name="shareMode" value="individual">
          <div class="option-content">
            <div class="option-title">ğŸ‘¤ Cada roomie usa el suyo</div>
            <div class="option-desc">Cada uno buscarÃ¡ sus propias fuentes</div>
          </div>
        </div>
        
        <button class="btn-primary" onclick="goToStep(5)">Continuar â†’</button>
        <button class="btn-secondary" onclick="goToStep(3)">â† Volver</button>
      </div>
    </div>
    
    <!-- PASO 5: BÃºsqueda de pelÃ­cula -->
    <div id="step5" class="step">
      <div class="step-card wide">
        <h1>ğŸ¬ Busca tu pelÃ­cula o serie</h1>
        
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="Matrix, Breaking Bad...">
        </div>
        
        <div id="searchResults" class="movie-grid"></div>
        
        <button class="btn-secondary" onclick="goToStep(4)">â† Volver</button>
      </div>
    </div>
    
    <!-- PASO 6: SelecciÃ³n de fuentes -->
    <div id="step6" class="step">
      <div class="step-card wide">
        <div class="movie-header">
          <img id="selectedPoster" src="" alt="Poster">
          <div class="movie-info">
            <h2 id="selectedTitle">-</h2>
            <div class="movie-meta">
              <span id="selectedRating">â­ -</span>
              <span id="selectedYear">-</span>
              <span id="selectedType">-</span>
            </div>
            <p id="selectedOverview">-</p>
          </div>
        </div>
        
        <!-- â­ Selector de temporada y episodio para series -->
        <div id="episodeSelector" style="display: none; margin: 25px 0;">
          <h3 class="section-title">ğŸ“º Selecciona el episodio</h3>
          
          <!-- Selector de temporada -->
          <div id="seasonSelectorContainer" style="margin-bottom: 20px;">
            <p class="section-subtitle">Temporada</p>
            <div id="seasonButtons" class="episode-grid"></div>
          </div>
          
          <!-- Selector de episodio -->
          <div id="episodeSelectorContainer" style="display: none;">
            <p class="section-subtitle">Episodio</p>
            <div id="episodeButtons" class="episode-grid"></div>
          </div>
        </div>
        
        <h3 class="section-title">ğŸ” Fuentes disponibles</h3>
        <p class="section-subtitle">Selecciona la mejor calidad para tu sala</p>
        
        <div id="sourcesList" class="sources-list">
          <div class="loading">Cargando fuentes...</div>
        </div>
        
        <div class="actions">
          <button class="btn-secondary" onclick="goToStep(5)">â† Volver</button>
          <button id="btnCreateRoom" class="btn-primary" disabled onclick="createRoom()">Crear sala â†’</button>
        </div>
      </div>
    </div>
    
    <!-- PASO 7: Sala creada -->
    <div id="step7" class="step">
      <div class="step-card wide">
        <div class="room-header">
          <h2 id="roomTitle">PROYECTANDO</h2>
          <p id="roomSubtitle">en la sala de</p>
        </div>
        
        <div class="room-poster">
          <img id="roomPoster" src="" alt="Poster">
        </div>
        
        <div class="room-info">
          <h3 id="roomMovieTitle">-</h3>
          <div class="room-meta">
            <span id="roomYear">ğŸ“… -</span>
            <span id="roomType">ğŸ¬ -</span>
          </div>
          <p id="roomOverview">-</p>
        </div>
        
        <div class="room-actions">
          <button id="btnStartProjection" class="btn-primary-large">â–¶ï¸ Comenzar ProyecciÃ³n</button>
          <button id="btnInviteRoomies" class="btn-outline-large">ğŸ“‹ Invitar Roomies</button>
        </div>
        
        <div class="chat-section">
          <h4>ğŸ’¬ Chat de la sala</h4>
          <div id="chatMessages" class="chat-messages"></div>
          <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Escribe un mensaje..." maxlength="200">
            <button id="btnSendChat" class="btn-send">Enviar</button>
          </div>
        </div>
      </div>
    </div>
    
  </div>
  
  <script src="/socket.io/socket.io.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
